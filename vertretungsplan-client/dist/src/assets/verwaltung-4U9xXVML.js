import{i as v,a as L,b as m,m as y,l as A,h as l,c as b,d as I,R as u,g as r,f as D,j as h}from"./utility-6HeZRMOR.js";/* empty css             */const T=document.getElementById("class-dropdown"),f=document.getElementById("teacher-dropdown"),E=document.getElementById("substitution-dropdown"),g=document.getElementById("subject-dropdown"),B=document.getElementById("hour-dropdown"),w=document.getElementById("art-dropdown"),U=document.getElementById("submit"),C=["Klasse","Stunde","Fach","Art","Lehrer","Vertreter","Delete"],S=document.getElementById("substitution-plan-body"),N=document.getElementById("substitution-plan-head"),p="Keine",_=[{title:"Schüler",id:"students"},{title:"Lehrer",id:"teachers"},{title:"Verwaltung",id:"administration"},{title:"Stundenpläne",id:"timetable-entries"},{title:"Klassen",id:"classes"}];function j(t,s){m(()=>{s.remove(),setTimeout(()=>window.alert("Vertretungsplan Eintrag erfolgreich gelöscht!"),100)},l,"delete",u+r+"/substitution-plan/"+t,t)}function M(t,s,o,d){t.forEach(c=>{const n=o.insertRow();d.forEach((e,a)=>{const i=n.insertCell(a);e=h[e],e===h.Delete?O(c,e,n,i):i.textContent=c[e]})})}function P(t,s,o,d){const c=t.data;d.forEach(n=>s.innerHTML+=`<th>${n}</th>`),c.forEach(n=>{const e=document.createElement("tr");d.forEach(a=>{const i=document.createElement("td");O(n,h[a],e,i),e.appendChild(i)}),o.appendChild(e)})}function O(t,s,o,d){if(s===h.Delete){const c=document.createElement("button"),n=document.createElement("img");n.src="/src/assets/icons/delete.svg",c.appendChild(n),c.className="delete",c.onclick=()=>j(t.id,o),d.appendChild(c)}else d.textContent=t[s]}function x(){m(function(t){b(t,document.getElementById("students-head"),document.getElementById("students-body"),["Name","Klasse","Rolle"])},l,"get",u+r+"/students")}function H(){m(function(t){b(t,document.getElementById("teachers-head"),document.getElementById("teachers-body"),["Name","Rolle","Anwesenheit","Faecher"])},l,"get",u+r+"/teachers")}function W(){m(function(t){b(t,document.getElementById("administration-head"),document.getElementById("administration-body"),["Name","Rolle"])},l,"get",u+r+"/administrators")}function $(){document.querySelectorAll("h1").forEach(o=>{o.textContent==="Stundenpläne"&&o.parentElement.classList.add("table-container-timetable-entries")});const t=document.getElementById("timetable-entries-body"),s=document.getElementById("timetable-entries-head");I.request({method:"get",url:u+r+"/courses",withCredentials:!0}).then(o=>{s.innerHTML+="<th>Klasse</th>",o.data.forEach(c=>{const n=document.createElement("tr"),e=document.createElement("td");e.textContent=c.name,e.addEventListener("click",()=>V(c,e)),n.appendChild(e),t.appendChild(n)})}).catch(o=>{l(o)})}function V(t,s){if(s.children.length>0)s.removeChild(s.children[0]);else{const o=document.createElement("table"),d=document.createElement("tr");d.innerHTML="<th>Stunde</th><th>Klasse</th><th>Fach</th><th>Lehrer</th><th>Tag</th>",o.appendChild(d);const c=document.createElement("div");c.className="table-container",c.appendChild(o);const n=document.createElement("div");n.className="table-container-wrapper",n.appendChild(c),I.request({method:"get",url:u+r+`/timetable-entries/${t.name}`,withCredentials:!0}).then(e=>{e.data.forEach(a=>{const i=document.createElement("tr");i.innerHTML=`<td>${a.hour}</td><td>${a.course}</td><td>${a.subject}</td><td>${a.teacher}</td><td>${a.day}</td>`,o.appendChild(i)}),s.appendChild(n)}).catch(e=>{l(e)})}}function K(t,s,o){const d=["Name","Schueler"],c=t.data;d.forEach(n=>{s.innerHTML+=`<th>${n}</th>`}),c.forEach(n=>{const e=document.createElement("tr");d.forEach(a=>{const i=document.createElement("td");a==="Schueler"?i.textContent=n[h[a]]+` ${n.numberOfStudents-5>0?" und "+(n.numberOfStudents-5)+" weitere...":""}`:i.textContent=n[h[a]],e.appendChild(i)}),o.appendChild(e)})}function q(){m(function(t){K(t,document.getElementById("classes-head"),document.getElementById("classes-body"))},l,"get",u+r+"/courses")}function F(t,s,o,d,c,n){const e=JSON.stringify({courseId:t,hour:s,art:o,typ:"MANUELL",teacherId:d,substituteId:c,subjectId:n});m(function(a){M([{art:w.value,subject:g.value,course:T.value,teacher:f.value,hour:B.value,typ:"MANUELL",substitute:E.value===p?"":E.value,id:a.data.id}],N,S,C)},l,"post",u+r+"/substitution-plan",e,{"Content-Type":"application/json"})}function J(){m(function(t){const s=new Map(Object.entries(t.data.courses)),o=new Map(Object.entries(t.data.teachers)),d=new Map(Object.entries(t.data.subjects)),c=s.get(T.value),n=B.value,e=w.value,a=o.get(f.value),i=o.get(E.value)===p?null:o.get(E.value),R=d.get(g.value);e==="VERTRETUNG"&&i==null?window.alert("Bitte wähle einen Vertreter aus!"):e==="ENTFALL"&&i!=null?window.alert("Eine Stunde die entfällt kann keine Vertretung haben!"):F(c,n,e,a,i,R)},l,"get",u+r+"/entities")}function k(){m(function(t){const s=new Map(Object.entries(t.data.courses)),o=new Map(Object.entries(t.data.teachers)),d=new Map(Object.entries(t.data.subjects));s.forEach((n,e)=>{const a=document.createElement("option");a.value=e,a.text=e,T.appendChild(a)}),o.forEach((n,e)=>{const a=document.createElement("option");a.value=e,a.text=e,f.appendChild(a),E.appendChild(a.cloneNode(!0))});const c=document.createElement("option");c.value=p,c.text=p,E.appendChild(c),d.forEach((n,e)=>{const a=document.createElement("option");a.value=e,a.text=e,g.appendChild(a)})},l,"get",u+r+"/entities")}function z(){v([D]),L(_),m(function(t){P(t,N,S,C)},l,"get",u+"/substitution-plan/MANUELL"),x(),H(),W(),$(),q(),k(),y(),U.addEventListener("click",J),document.getElementById("logout-img").addEventListener("click",A)}window.onload=z;
